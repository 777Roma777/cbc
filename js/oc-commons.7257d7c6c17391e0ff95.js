"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9351],{14697:function(e,t,n){n.d(t,{T:function(){return i}});var r=n(9733);function i(e,t){var n={};return void 0!==e&&(n.formName=e),void 0!==t&&(n.referringButtonId=t),{type:r.N,payload:n}}},25641:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(4942),i=n(93433),o=n(29439),a=(n(9867),n(7231),n(58109),n(95566),n(68438),n(83464),n(19496),n(32747)),s=n(92972),c=n.n(s),l=2,u=3,d=5,f=n(56169),p=n(88101),m=n(38096),h=n(57665),b=n(8375),v=n(92269),y=n(56552);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=(0,a.useState)(1),n=(0,o.Z)(t,2),r=n[0],s=n[1],c=(0,a.useRef)([]),g=(0,a.useRef)(),x=(0,a.useRef)(),O=(0,v.Z)(g,"viewportLarge"),w=d;switch(O){case"viewportSmall":w=l;break;case"viewportMedium":w=u;break;default:w=d}var k=e.list||[],N=k.length,P=0===N,E=Math.ceil(N/w);P&&(w=d,E=1),(0,a.useEffect)((function(){r>E&&s(E)}),[O]),(0,a.useEffect)((function(){var e,t;s(1),null!==x&&void 0!==x&&null!==(e=x.current)&&void 0!==e&&e.scroll&&(null===x||void 0===x||null===(t=x.current)||void 0===t||t.scroll({left:0,behavior:"smooth"}))}),[e.header]);var S=function(e){var t=e-1;c.current[t]&&c.current[t].scrollIntoView({block:"nearest"})},C=function(t,n){var r,o,a,c,l={id:null!==(r=t.videoId)&&void 0!==r?r:t.id,title:t.title,captions:{}||!1,duration:null!==(o=t.videoDuration)&&void 0!==o?o:t.duration,thumbnail:null!==(a=t.imageURL)&&void 0!==a?a:t.thumbnail,airDate:null!==(c=t.videoAirDate)&&void 0!==c?c:t.airDate};return(0,y.jsx)(h.Z,{className:"video-card-container",featureAttribution:{name:"carousel",instance:e.header,position:n+1},children:(0,y.jsx)(m.Z,j(j({},l),{},{cardType:"video-card-normal",onFocus:function(e){return function(e,t){e.preventDefault();var n=(0,i.Z)(k).findIndex((function(e){return e.videoId===t})),r=Math.ceil((n+1)/w);s(r)}(e,t.videoId)},cardClickHandler:e.onClick}))},"".concat(t.videoId||t.id,"-").concat(n))},T=r>1,I=r<E,D=function(){if(!P){for(var t=[],n=k.map(C),r=function(r){var i,o=r*w,a=n.slice(o,o+w),s=(i=r+1,"".concat(e.header?e.header.replace(/\s/g,""):"","-slider-").concat(i));c.current[r]||(c.current[r]=null),t.push((0,y.jsx)("div",{id:s,ref:function(e){return c.current[r]=e},children:a},s))},i=0;i<E;i++)r(i);return t}}()||function(){for(var e=[],t=0;t<5;t++)e.push((0,y.jsx)("div",{className:"video-card-container placeholder",children:(0,y.jsx)(m.Z,{})},"slider-card-placeholder-".concat(t)));return e}(),R=(0,p.C_)("carouselHeader",e.header,void 0,!0),F=I?null:(0,y.jsx)("span",{className:"a11y",children:"End of carousel"});return(0,y.jsxs)("div",{className:"carouselWrapper",role:"region","aria-labelledby":R,ref:g,children:[(0,y.jsxs)("div",{className:"carouselTop",children:[(0,y.jsxs)("h2",{className:"header ".concat(b.Z.header),id:R,children:[e.header," ",(0,y.jsx)("span",{className:"a11y",children:"Carousel"})]}),(0,y.jsx)("div",{className:"carouselNav","aria-hidden":"true",children:(0,y.jsxs)("span",{className:"carouselIndicator",children:["Page ",r," of ",E]})})]}),(0,y.jsxs)("div",{className:"carousel sclt-carousel",children:[(0,y.jsx)("button",{className:"prev".concat(T?" show":""),onClick:function(){if(r>1){var e=r-1;S(e),s(e)}},"aria-label":"previous",children:(0,y.jsx)(f.default,{type:"chevron"})}),(0,y.jsx)("div",{className:"itemContainer",children:(0,y.jsx)("div",{ref:x,className:"itemList",children:D})}),(0,y.jsx)("button",{className:"next".concat(I?" show":""),onClick:function(){if(r<E){var e=r+1;S(e),s(e)}},"aria-label":"next",children:(0,y.jsx)(f.default,{type:"chevron"})}),F]})]})}x.propTypes={list:c().array,header:c().string,onClick:c().func},x.defaultProps={list:null,header:"",onClick:null};var O=x},12077:function(e,t,n){var r=n(51341),i=(0,r.ZP)({resolved:{},chunkName:function(){return"AsyncContentArea"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(532),n.e(9351),n.e(9947)]).then(n.bind(n,31494))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 31494}});t.Z=i},26618:function(e,t,n){var r=n(15671),i=n(43144),o=n(82963),a=n(61120),s=n(60136),c=(n(53182),n(79321),n(95763),n(26817),n(50155),n(51335),n(83234),n(92435),n(87201),n(23503),n(72891),n(21934),n(81466),n(40703),n(40627)),l=n(34325),u=n(19227);function d(e,t,n){return t=(0,a.Z)(t),(0,o.Z)(e,f()?Reflect.construct(t,n||[],(0,a.Z)(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var p=function(e){function t(){var e;return(0,r.Z)(this,t),(e=d(this,t)).policyName="ColumnPolicy",e}return(0,s.Z)(t,e),(0,i.Z)(t,[{key:"buildCardTypesMap",value:function(){this.cardTypesMap=new Map,this.cardTypesMap.set(0,c.QU.TYPE_REGULAR),this.cardTypesMap.set(u.Zm,c.QU.TYPE_TEXT)}}]),t}(l.Z);t.Z=p},68254:function(e,t,n){n.d(t,{ZP:function(){return W}});var r=n(71002),i=n(4942),o=n(29439),a=(n(9867),n(7231),n(83464),n(95566),n(19496),n(2041),n(2612),n(58109),n(68438),n(32747)),s=n(7636),c=n(24515),l=n(86045),u={typoForm:{id:360001354433,header:"Report Typo or Error",formTags:["typo-form"],formSpecificFields:[360022771214,360022772193,360028518814],description:{display:!1,defaultText:"A typo report."},subject:{display:!1,defaultText:"Typo report submitted by a user from the CBC website.",appendPageTitle:!0}},personalizationForm:{id:360003356454,header:"Feedback",formSpecificFields:[1260809793769,"personalization",360028518814],description:{display:!1,defaultText:"Personalization feedback"},subject:{display:!1,defaultText:"CBC.ca personalization feature feedback",appendPageTitle:!0}},membershipForm:{id:1260803286710,header:"Account Centre Feedback",formTags:["membership-form"],formSpecificFields:[1260804754870,1260804725469,1260804746170,1260804873290,"userEmail"],description:{display:!1,defaultText:"Account Centre feedback report."},subject:{display:!1,defaultText:"Account Centre feedback submitted by a user from the CBC website.",appendPageTitle:!0}},myOlympicsBriefingForm:{id:1260809753990,header:"Feedback",formSpecificFields:["mobFollowCertainSports","mobWorksAsExpected","mobAnyOtherFeedback"],description:{display:!1,defaultText:"My Olympics Briefing Feedback"},subject:{display:!1,defaultText:"My Olympics: Personalization feature feedback",appendPageTitle:!0}}},d={id:360022791294,type:"text",title:"Website URL",required:!0,labelText:"Website URL"},f={id:30217537,type:"description",required:!1,labelText:"Description"},p={id:30217527,type:"subject",required:!1,labelText:"Subject"},m={id:360028575073,type:"numeric",required:!1,labelText:"Content Id"},h={360022771214:{id:360022771214,type:"text",required:!0,maxChars:200,labelText:"Enter typo or error as found on page",emptyInputText:"Please enter the typo or error.",prompts:{empty:"Please enter the typo or error."}},360022772193:{id:360022772193,type:"text",required:!0,maxChars:200,labelText:"Enter correction",emptyInputText:"Please enter the correction.",prompts:{empty:"Please enter the correction."}},360028518814:{id:360028518814,type:"text",required:!1,maxChars:250,labelText:"Email (optional)",emptyInputText:"Please enter your email.",validation:c.D6,invalidInputText:"Please enter valid email.",prompts:{invalid:"Please enter valid email."}},33727647:{id:33727647,type:"honeypot",required:!1,labelText:"Please leave this input empty.",prompts:{}},1260809793769:{id:1260809793769,type:"radio",required:!0,labelText:"How satisfied are you with MyCBC?",options:[{label:"Very unsatisfied",tag:"satisfaction_very_unsatisfied"},{label:"Unsatisfied",tag:"satisfaction_unsatisfied"},{label:"Neutral",tag:"satisfaction_neutral"},{label:"Satisfied",tag:"satisfaction_satisfied"},{label:"Very satisfied",tag:"satisfaction_very_satisfied"},{label:"I haven't used it",tag:"satisfaction_i_havent_used_it"}],prompts:{empty:"Please rate your satisfaction with MyCBC."}},personalization:{id:"personalization",type:"description",required:!0,labelText:"Why? How could we improve MyCBC?",prompts:{empty:"Please provide your feedback on MyCBC."}},mobFollowCertainSports:{id:"mobFollowCertainSports",type:"description",required:!1,labelText:"Do you find it useful being able to follow certain sports? Please explain why.",prompts:{}},mobWorksAsExpected:{id:"mobWorksAsExpected",type:"description",required:!1,labelText:"Is there anything that doesn\u2019t work the way you expected it to?",prompts:{}},mobAnyOtherFeedback:{id:"mobAnyOtherFeedback",type:"description",required:!1,labelText:"Do you have any other feedback you\u2019d like to share?",prompts:{}},1260804754870:{id:1260804754870,type:"select",required:!0,labelText:"What is the nature of your feedback?",emptyInputText:"Please choose one",options:["I found a bug","I found something confusing","I have a suggestion for a future improvement"],prompts:{empty:"Please choose one."}},1260804725469:{id:1260804725469,type:"text",required:!0,maxChars:500,labelText:"Please describe what you found.",emptyInputText:"Please enter the description.",prompts:{empty:"Please enter the description."}},1260804746170:{id:1260804746170,type:"select",required:!0,labelText:"I would describe the device I am using as:",emptyInputText:"Please choose a device",options:["Smartphone","Tablet","Laptop","Desktop"],prompts:{empty:"Please choose a device."}},1260804873290:{id:1260804873290,type:"select",required:!0,labelText:"The browser I am using is:",emptyInputText:"Please choose a browser",options:["Chrome","Firefox","Safari","Edge","Other"],prompts:{empty:"Please choose a browser."}},userEmail:{id:360028518814,key:"userEmail",type:"hidden",required:!1,labelText:"Member Email"}},b=" \n\n",v="Thank you for your feedback.",y=n(14697),g=n(56169),j=n(92972),x=n.n(j),O=n(14507),w=n.n(O),k=n(56552),N=function(e){var t=e.field;return(0,k.jsx)("label",{className:"field",htmlFor:"field_"+t.id,id:"feedbackFormLabel"+t.id,children:t.labelText},"label"+t.id)};N.propTypes={field:x().shape({id:x().oneOfType([x().number,x().string]).isRequired,labelText:x().string.isRequired}).isRequired};var P=N,E=function(e){var t=e.inputError,n=e.field;return t?(0,k.jsxs)("p",{id:"feedbackFormInputErrorMsg"+n.id,className:"feedbackFormInputErrorMsg",children:[(0,k.jsx)("span",{className:"a11y",children:"Error: "}),n.prompts[t]||n.prompts.invalid||""]}):null};E.propTypes={inputError:x().string,field:x().shape({id:x().oneOfType([x().number,x().string]).isRequired,prompts:x().object.isRequired})};var S=E;function C(e){return e.inputError?(0,k.jsx)(g.default,{type:"exclamation"}):null}var T=function(e){var t=e.field,n=e.onEscClose,r=e.inputError,i=r&&"feedbackFormInputError";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P,{field:t}),(0,k.jsxs)("div",{className:w()("feedbackFormField","textField"),children:[(0,k.jsx)("input",{id:"field_"+t.id,type:"text",className:w()(i),"aria-labelledby":r?"feedbackFormInputErrorMsg"+t.id:null,onKeyDown:n,onChange:e.onChange}),(0,k.jsx)(C,{inputError:r})]}),(0,k.jsx)(S,{field:t,inputError:r})]})};T.propTypes={inputError:x().string,field:x().shape({id:x().oneOfType([x().number,x().string]).isRequired,prompts:x().object.isRequired})};var I=T,D=function(e){var t="field_".concat(e.field.id);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P,{field:e.field}),(0,k.jsxs)("div",{className:w()("feedbackFormField","radioField"),children:[e.field.options.map((function(n,r){var i="".concat(t,"_").concat(r);return(0,k.jsxs)("div",{className:"radioOption",children:[(0,k.jsx)("input",{type:"radio",id:i,name:t,value:n.tag,onKeyDown:e.onEscClose,onChange:function(t){return e.onChangeHandler(t,e.field)}}),(0,k.jsx)("label",{htmlFor:i,children:n.label})]},i)})),(0,k.jsxs)("div",{className:"feedbackFormFieldError",children:[(0,k.jsx)(C,{inputError:e.inputError}),(0,k.jsx)(S,{field:e.field,inputError:e.inputError})]})]})]})},R=function(e){var t=e.field,n=e.onEscClose,r=e.inputError,i=e.field.emptyInputText,o=i?(0,k.jsx)("option",{value:"",disabled:!0,children:i},e.field.id):"";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P,{field:t}),(0,k.jsxs)("div",{className:w()("feedbackFormField","selectField"),children:[(0,k.jsxs)("select",{id:"field_"+t.id,defaultValue:"",onKeyDown:n,onBlur:e.onChange,"aria-labelledby":r?"feedbackFormInputErrorMsg"+t.id:null,children:[o,e.field.options.map((function(t){return(0,k.jsx)("option",{value:t,children:t},e.field.id+"-"+t)}))]}),(0,k.jsx)(C,{inputError:r})]}),(0,k.jsx)(S,{field:t,inputError:r})]})};R.propTypes={inputError:x().string,field:x().shape({id:x().oneOfType([x().number,x().string]).isRequired,prompts:x().object.isRequired})};var F=R,Z=function(e){var t=e.field;return(0,k.jsx)("input",{id:"field_"+t.id,name:t.id.toString(),type:"hidden",value:t.value,ref:e.register},"input_"+t.id)},A=function(e){var t=e.field,n=e.onChangeHandler,r="field_"+t.id;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("label",{htmlFor:r,className:"a11y",children:t.labelText}),(0,k.jsx)("input",{id:r,type:"text",className:"a11y","aria-hidden":"true",tabIndex:"-1",onChange:function(e){return n(e,t)}})]})},H=function(e){var t=e.field,n=e.onChangeHandler,r=e.inputError,i=r&&"feedbackFormInputError";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(P,{field:t}),(0,k.jsxs)("div",{className:w()("feedbackFormField","descriptionField"),children:[(0,k.jsx)("textarea",{id:"field_".concat(t.id),className:w()(i),rows:"5","aria-labelledby":r?"feedbackFormInputErrorMsg"+t.id:null,onChange:function(e){return n(e,t)}}),(0,k.jsxs)("div",{className:"feedbackFormFieldError",children:[(0,k.jsx)(C,{inputError:e.inputError}),(0,k.jsx)(S,{field:e.field,inputError:e.inputError})]})]})]})};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}H.propTypes={inputError:x().string,field:x().shape({id:x().oneOfType([x().number,x().string]).isRequired,prompts:x().object.isRequired})};var L={radio:D,text:I,select:F,hidden:Z,honeypot:A,description:H},q=I,M=function(e){var t,n=e.field,r=e.formClose,o=e.onChangeHandler,a=(t=n.type,L[t]||q);return(0,k.jsx)(a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onChange:function(e){return o(e,n)},onEscClose:function(e){"Escape"===e.key&&r(e)}},e))};M.propTypes={field:x().shape({id:x().any.isRequired,labelText:x().string.isRequired}).isRequired,onChangeHandler:x().func.isRequired,formClose:x().func.isRequired};var U=M;function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=33727647;var W=function(e){var t,n,j=(0,s.useSelector)((function(e){return e.feedback})),x=j.formName,O=j.referringButtonId,w=(0,s.useSelector)((function(e){return e.app})),N=w.path,P=w.pageType,E=w.title,S=null,C=[];u[x]&&(C=function(e){var t=e.formSpecificFields.reduce((function(e,t){var n=h[t];return n?e.push(n):console.warn("unknown form field: ".concat(t)),e}),[]);!0===e.description.display&&t.push(f);!0===e.subject.display&&t.unshift(p);return t.unshift(h[z]),t}(S=u[x]));var T=(0,s.useSelector)((function(e){var t;return Array.isArray(null===(t=e.detail)||void 0===t||null===(t=t.content)||void 0===t?void 0:t.departments)?e.detail.content.departments.map((function(e){return e.slug})).join("-"):""})),I=(0,s.useSelector)((function(e){return e.app.contentId?e.app.contentId:""}));P&&(P=P[0].toUpperCase()+P.slice(1));var D="feedbackForm"+P,R=(0,s.useDispatch)(),F={slideUp:!1,filledFields:{},inputErrorMessage:null,submittedMsg:""},Z=(0,a.useState)(F),A=(0,o.Z)(Z,2),H=A[0],_=A[1],L=(0,a.useRef)(q(S,H.inputErrorMessage));function q(e,t){return null!==e&&null!==t}(0,a.useEffect)((function(){return function(){return M(void 0,!0)}}),[]),(0,a.useEffect)((function(){(0,l.shiftFocusSafely)(".feedbackFormSubmitted p")}),[H.submittedMsg]),(0,a.useEffect)((function(){M(void 0,!0)}),[N]),(0,a.useEffect)((function(){var e={};C.forEach((function(t){t.id!==z&&t.required&&(e[t.id]="")})),_(K(K({},H),{},{inputErrorMessage:e}))}),[null===(t=S)||void 0===t?void 0:t.id]),(0,a.useEffect)((function(){var e=q(S,H.inputErrorMessage);!1===L.current&&!0===e&&((0,l.shiftFocusSafely)(".feedbackFormField input:not(.a11y)"),_(K(K({},H),{},{slideUp:!0}))),L.current=e}),[S,H.inputErrorMessage]);var M=function(e,t){"object"===(0,r.Z)(e)&&e.preventDefault&&e.preventDefault(),O&&!0!==t&&(0,l.shiftFocusSafely)("#"+O),R((0,y.T)(null,"")),_(F)},B=function(){var e=Object.entries(H.filledFields);if(e.length<=0)return S.subject.defaultText;var t="".concat(d.title,": www.cbc.ca/").concat(N).concat(b);t=e.reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1],a=h[r];return!a||"text"!==a.type&&"select"!==a.type||(e+="".concat(h[r].labelText||r,": ").concat(i).concat(b)),e}),t),I&&(t+="".concat(m.labelText,": ").concat(I).concat(b));var n=e.reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1],a=h[r];return a&&"description"===a.type&&i&&(e+=i+b),e}),"");return n&&(t+=n),t},W=function(e){_(K(K({},H),{},{filledFields:{},submittedMsg:e}))},V=function(e,t){var n=H.filledFields,r=e.target.value,o="maxChars"in t?t.maxChars:1/0;r.length<=o?_(K(K({},H),{},{filledFields:K(K({},n),{},(0,i.Z)({},t.id,r))})):e.target.value=n[t.id]},Y=H.submittedMsg,X=H.inputErrorMessage,G=H.slideUp;return L.current?(0,k.jsxs)("div",{className:"feedbackForm  ".concat(D," ").concat(G&&"slideUp"),role:"dialog","aria-labelledby":"feedbackFormHeader",onKeyDown:function(e){"Escape"===e.key&&M(e)},children:[(0,k.jsxs)("h2",{id:"feedbackFormHeader",className:"feedbackFormHeader",children:[null===(n=S)||void 0===n?void 0:n.header,""===Y&&(0,k.jsx)("button",{className:"feedbackFormClose","aria-label":"Close form without submitting.",onClick:M,onKeyDown:function(e){"Tab"===e.key&&!0===e.shiftKey&&(e.preventDefault(),(0,l.shiftFocusSafely)(".feedbackFormSubmit"))},children:(0,k.jsx)(g.default,{type:"close"})})]}),""===Y?(0,k.jsxs)("form",{children:[C.map((function(t){var n=t.id in X?X[t.id]:"",r=t.key?t.key:t.id;return void 0!==e[r]&&(t.value=e[r]),(0,k.jsx)(U,{field:t,inputError:n,formClose:M,onChangeHandler:V},r)})),(0,k.jsx)("button",{className:"feedbackFormBtn1  feedbackFormSubmit",onClick:function(e){if(e.preventDefault(),!H.filledFields[z]||(_(K(K({},H),{},{filledFields:{},submittedMsg:v})),0)){if(function(){var e=H.filledFields,t=!0,n={},r=null;return C.forEach((function(o){"hidden"===o.type&&_(K(K({},H),{},{filledFields:K(K({},e),{},(0,i.Z)({},o.id,o.value))}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e=e.trim(),t.required&&!e?"empty":e&&t.hasOwnProperty("validation")&&"function"===typeof t.validation?t.validation(e)?void 0:"invalid":void 0}(e[o.id],o);a?(t=!1,n[o.id]=a,r=null===r?o.id:r):n[o.id]=""})),t||(_(K(K({},H),{},{inputErrorMessage:n})),(0,l.shiftFocusSafely)("#field_"+r)),t}()){var t=function(){var e=H.filledFields,t=p.id,n=f.id,r=Object.entries(e).filter((function(e){var r=(0,o.Z)(e,1)[0];return r!==t&&r!==n&&(!h[r]||"description"!==h[r].type)})).map((function(e){var t=(0,o.Z)(e,2);return{id:t[0],value:t[1]}})),i=e[t]?e[t]:S.subject.defaultText;!0===S.subject.appendPageTitle&&(i+=" "+E);var a=[];return S.formTags&&(a=a.concat(S.formTags)),T&&a.push("department_"+T),{request:{requester:{name:"Anonymous Web User"},subject:i,comment:{body:B()},tags:a,custom_fields:r,ticket_form_id:S.id}}}();(0,c.ax)(t).then((function(){return W(v)})).catch((function(){return W("We're sorry but the request could not be made.")})),_(K(K({},H),{},{submittedMsg:"Sending..."}))}}else W(v)},onKeyDown:function(e){"Escape"===e.key&&M(e),"Tab"===e.key&&!1===e.shiftKey&&(e.preventDefault(),(0,l.shiftFocusSafely)(".feedbackFormClose"))},children:"Submit"})]}):(0,k.jsxs)("div",{className:"feedbackFormSubmitted",children:[(0,k.jsx)("p",{tabIndex:-1,children:Y}),(0,k.jsx)("button",{className:"feedbackFormSubmittedClose feedbackFormBtn1","aria-label":"Close and return to page.",onClick:M,onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),(0,l.shiftFocusSafely)(".feedbackFormSubmitted"))},children:"Close"})]})]}):null}},65393:function(e,t,n){n.d(t,{ZP:function(){return k},Pb:function(){return O},E4:function(){return x}});n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942),i=(n(9867),n(7231),n(92972)),o=n.n(i),a=n(29439),s=n(32747),c=n(56169),l=n(26574),u=n(14507),d=n.n(u),f=n(10947),p=n(56552);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=(0,s.useState)(!1),n=(0,a.Z)(t,2),r=n[0],i=n[1],o=(0,s.useRef)();(0,s.useEffect)((function(){i(!1)}),[e.path]);var u=(0,s.useCallback)((function(){i(!r)}),[r]),m=function(e){var t;"Escape"===e.key&&(i(!1),null===(t=o.current)||void 0===t||t.focus())},b="",v=e.items,y=d()("moreItemsNav",{open:r,external:e.isExternalHeader}),g=(0,s.useRef)(null),j=function(e){var t;null!==g&&void 0!==g&&null!==(t=g.current)&&void 0!==t&&t.contains(e.relatedTarget)||i(!1)};return v&&void 0!==v&&(b=v.map((function(t,n){var r={item:t,key:"morenav-".concat(n),path:e.path,className:"moreNavListItem",linkClassName:"moreNavLink",onBlur:j,keyUpHandler:m};return(0,p.jsx)(f.Z,h(h({},r),{},{toggleMenuVisibility:u}))}))),(0,p.jsxs)("div",{className:y,"data-cy":"more-items-nav",children:[function(){var t=e.allHidden?"Sections":"More";e.moreButtonLabel&&(t=e.moreButtonLabel);var n="".concat(t," from ").concat(e.baseNavSection," ").concat(e.subSection?e.subSection:"");if(e.isExternalHeader){var i="//www.cbc.ca/".concat(e.baseNavSection);return(0,p.jsxs)(l.default,{className:"navLink subNavLink",url:i,external:!0,children:[" ",t," \xbb"," "]})}return(0,p.jsxs)("button",{className:"moreButton","aria-label":n,"aria-expanded":r,"aria-controls":e.id,onClick:u,onKeyUp:m,ref:o,"data-cy":"more-button",children:[t," ",(0,p.jsx)(c.default,{type:"chevron"})]})}(),(0,p.jsx)("ul",{className:"moreItemsList","data-cy":"more-items-list",id:e.id,"aria-hidden":!r,ref:g,children:b})]})};b.propTypes={baseNavSection:o().string.isRequired,subSection:o().string.isRequired,allHidden:o().bool,moreButtonLabel:o().string,isExternalHeader:o().bool,id:o().string},b.defaultProps={baseNavSection:"",subSection:"",allHidden:!1,moreButtonLabel:"",isExternalHeader:!1,id:"more-items-list"};var v=b,y=n(75564);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e,t){var n=t.value,r=t.index,i=t.isVisible,o={item:n,index:r,className:d()("subNavListItem",{standAlone:void 0!==t.standAlone,hidden:!i}),linkClassName:d()("subNavLink",{firstItem:0===r}),path:e.path,isExternalHeader:e.isExternalHeader};return(0,p.jsx)(f.Z,j({},o),"responsive-".concat(r))},O=function(e,t,n,r){var i={items:t,baseNavSection:e.baseNavSection,subSection:e.subSection,path:e.path,allHidden:r,moreButtonLabel:e.moreButtonLabel,isExternalHeader:e.isExternalHeader,id:e.id+"-more-items-list"},o=d()("subNavListItem","moreNavTrigger",{active:n&&t&&t.length});return(0,p.jsx)("li",{className:o,children:(0,p.jsx)(v,j({},i))})},w=function(e){var t=(0,y.d)(e.items,e.path,{collapseOnMobile:e.collapseOnMobile}),n=t.assignRef,r=(0,t.getHiddenItemsCount)(),i="",o="viewportSmall"===e.viewport,a=o?e.items:null,s=0,c=!0;e.items&&!o&&(s=e.items.length-r,a=e.items.slice(s,e.items.length),i=e.items.map((function(t,n){return r&&(c=n<s),x(e,{value:t,index:n,isVisible:c})})));var l=d()("responsiveNav subNavList",e.className,{allHidden:o||!s}),u=e.gemDepartment?(0,p.jsx)("li",{className:"gemWrapper subNavListItem",children:e.gemDepartment}):null;return(0,p.jsxs)("ul",{className:l,ref:function(e){return n(e)},children:[u,i,O(e,a,r,o)]})};w.propTypes={items:o().array,baseNavSection:o().string.isRequired,subSection:o().string.isRequired,path:o().string,showLogo:o().bool,className:o().string,viewport:o().string,collapseOnMobile:o().bool,gemDepartment:o().object,moreButtonLabel:o().string,isExternalHeader:o().bool,id:o().string},w.defaultProps={items:null,baseNavSection:"",subSection:"",path:"",showLogo:!1,className:"",viewport:"",collapseOnMobile:!0,gemDepartment:null,moreButtonLabel:"",isExternalHeader:!1,id:"responsive-nav"};var k=w},27422:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(29439),i=n(32747),o=(n(83464),n(95566),n(19496),function(e,t){var n=new IntersectionObserver((function(r){r.forEach((function(r){r.isIntersecting&&(n.unobserve(e),t())}))}));n.observe(e);var r=function(){n.unobserve(e),r=function(){}};return r}),a=n(56552),s=function(e){var t=(0,i.useState)(!1),n=(0,r.Z)(t,2),s=n[0],c=n[1],l=(0,i.useRef)(),u=function(){};return(0,i.useEffect)((function(){if(u(),l.current&&!s)return"IntersectionObserver"in window?u=o(l.current,(function(){return c(!0)})):c(!0),function(){u()}}),[]),s?e.children?e.children:null:(0,a.jsx)("div",{ref:l,className:"lazy-load"})}},53270:function(e,t,n){var r=n(29439),i=(n(30666),n(95566),n(6129),n(9867),n(7231),n(32747)),o=n(7636),a=n(92972),s=n.n(a),c=n(56169),l=n(46826),u=n(31869),d=n(68075),f=n(80792),p=n(63578),m=n(75854),h=n(56552);function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=(0,i.useState)(!1),n=(0,r.Z)(t,2),a=n[0],s=n[1],v=(0,i.useState)(""),y=(0,r.Z)(v,2),g=y[0],j=y[1],x=(0,i.useState)(""),O=(0,r.Z)(x,2),w=O[0],k=O[1],N=(0,i.useState)(""),P=(0,r.Z)(N,2),E=P[0],S=P[1],C=(0,o.useDispatch)();(0,i.useEffect)((function(){T()}),[e]);var T=function(){R(D().radio)},I=function(t,n){var r,i=b(e.listenRecord);try{for(i.s();!(r=i.n()).done;){var o,a=b(r.value.stations);try{for(a.s();!(o=a.n()).done;){var s=o.value;if((!t||s.radio===t)&&(!n||s.location===n))return s}}catch(c){a.e(c)}finally{a.f()}}}catch(c){i.e(c)}finally{i.f()}},D=function(){var t=function(){var e=(0,d.getRadioFromStorage)();return f.z2[e]||{radio:e,location:""}}(),n=t.radio,r=t.location,i=g||n,o=w||r,a=e.showRegionHierarchy?p.fu.listenLive:e.listenRecord[0];return(i?e.showRegionHierarchy?I(i,o):e.listenRecord.find((function(e){return e.radio===i}),null,a):a)||a},R=function(e){(0,u.U9)(e).then((function(e){var t=e.program&&e.program.name?e.program.name:e;S(t)}))},F=function(){s(!a)},Z=function(e){var t=e.currentTarget.dataset.radio||"",n=e.currentTarget.dataset.location||"";j(t),k(n),s(!1),R(t)},A=function(e){13===e.charCode&&Z(e)},H=function(t){var n="",r=t.currentTarget.dataset.radio,i=t.currentTarget.dataset.location;n=e.showRegionHierarchy?I(r,i):e.listenRecord.find((function(e){return r===e.radio})),C((0,l.o)({mediaItem:{sourceId:n.liveRadioId,mediaId:n.liveRadioId,source:m.lS,type:"audio",isPlayable:!1,feature:{name:"radio-bar"}},isVisible:!0,selector:m.IL,forcePersistence:!0}))},_=function(e){32===e.charCode?(e.preventDefault(),H(e)):13===e.charCode&&H(e)},L=function(e){return(0,h.jsx)("ul",{children:e.map((function(e){return(0,h.jsx)("li",{children:(0,h.jsx)("button",{id:"radioRegion-".concat(e.radio),onClick:Z,onKeyPress:A,"data-radio":e.radio,"data-location":e.location,value:e.radio,children:e.location},e.radio)},e.location)}))},"radioRegionList")};return(0,h.jsxs)("div",{className:"listenLive ".concat(e.listenRecord&&e.listenRecord.length>1?"hasDropdown":""," ").concat(e.showRegionHierarchy?"showsProvinces":""),children:[(0,h.jsx)("h2",{className:"a11y",children:"LIVE RADIO"}),(0,h.jsx)("span",{className:"liveLabel",children:"LIVE"}),function(){if(e.listenRecord.length<=1)return null;var t=D();return(0,h.jsxs)("div",{className:"locationDropDown",children:[(0,h.jsxs)("button",{className:"locationButton ".concat(a?"open":""),onClick:F,"aria-label":"Choose your region, currently ".concat(t.location),"aria-expanded":a?"true":"false",children:[t.location,(0,h.jsx)(c.default,{type:"chevron"})]}),a?e.showRegionHierarchy?(0,h.jsxs)("div",{className:"locationList",children:[(0,h.jsx)("h3",{className:"a11y",children:"Provinces"}),e.listenRecord.map((function(e,t){return(0,h.jsxs)("div",{className:"radioRegion",children:[(0,h.jsx)("h4",{children:e.province},e.province),L(e.stations)]},"radioRegion-".concat(t))}))]}):L(e.listenRecord):null]})}(),function(){var e=D(),t=e.title?e.title:"CBC Radio One";return(0,h.jsx)("div",{className:"listenLink",onClick:H,onKeyPress:_,"data-radio":e.radio,"data-location":e.location,role:"button",tabIndex:"0",children:(0,h.jsxs)("div",{className:"linkContainer",children:[(0,h.jsx)(c.default,{type:"play",height:"25px",width:"25px","aria-label":"play"}),(0,h.jsx)("div",{className:"schedule nowPlaying",children:(0,h.jsxs)("span",{className:"nowPlayingNetwork",children:[t," ",(0,h.jsx)("span",{className:"".concat(""===E?"hide":""),children:"-"})," ",E]})})]})})}()]})};y.propTypes={listenRecord:s().array,showRegionHierarchy:s().bool},y.defaultProps={listenRecord:[{}],showRegionHierarchy:!1};var g=function(e,t){return JSON.stringify(e.listenRecord)===JSON.stringify(t.listenRecord)};t.Z=(0,i.memo)(y,g)},80792:function(e,t,n){n.d(t,{X3:function(){return a},cF:function(){return s},z2:function(){return c}});n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e){return o({title:"",liveRadioId:"",radio:"",location:""},e)},s=function(e){return o({province:"",stations:[]},e)},c={toronto:{radio:"toronto",location:"Toronto"}}},31869:function(e,t,n){n.d(t,{U9:function(){return j},Zj:function(){return y}});var r=n(43144),i=n(15671),o=n(82963),a=n(61120),s=n(60136),c=n(72407),l=n(93433),u=(n(83464),n(95566),n(19496),n(9867),n(7231),n(80792)),d=n(93789),f=n(41718),p=n(63578);function m(e,t,n){return t=(0,a.Z)(t),(0,o.Z)(e,h()?Reflect.construct(t,n||[],(0,a.Z)(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[],n=!1;return null===e&&(e=function(){var e,t=[],n=b(p.nv);try{var r=function(){var n=e.value,r=t.find((function(e){return e.province===n.province}));if(r)r.stations.push(n.listenLive[0]);else{var i,o={province:"",stations:[]};o.province=n.province,(i=o.stations).push.apply(i,(0,l.Z)(n.listenLive)),t.push(o)}};for(n.s();!(e=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}return t}(),n=!0),e.forEach((function(e){var r={};r=n?(0,u.cF)({province:e.province,stations:e.stations.map((function(e){return(0,u.X3)({title:e.title||"",liveRadioId:e.liveRadioId||"",radio:e.radio||"",location:e.location||""})}))}):(0,u.X3)({title:e.title||"",liveRadioId:e.liveRadioId||"",radio:e.radio||"",location:e.location||""}),t.push(r)})),t},g=function(e){function t(){return(0,i.Z)(this,t),m(this,t,arguments)}return(0,s.Z)(t,e),(0,r.Z)(t)}((0,c.Z)(Error));function j(e){var t="".concat(d.bl.radio+encodeURIComponent("&locationKey=".concat(e)));return fetch(t).then((function(e){if(!e.ok)throw new g(e.statusText);return e.json()})).catch((function(e){return f.default.error(e),"Sorry, the network request failed."}))}},87166:function(e,t,n){var r=n(34637),i=n(56552),o=function(e){var t=e.children,n=e.statusCode,o=e.polopolyId;return 2!==(e.statusCode/100|0)?(0,i.jsx)(r.default,{statusCode:n,polopolyId:o}):t};o.defaultProps={statusCode:200},t.Z=o},10947:function(e,t,n){n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942),i=n(92972),o=n.n(i),a=n(14507),s=n.n(a),c=n(26574),l=n(88101),u=n(56552);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=e.item.link,n=e.item.type,r=e.item.title,i="link-".concat(e.index),o=void 0!==n&&"external"===n||e.isExternalHeader,a=t==="/".concat(e.path),d=null,p=e.onBlur,m=e.keyUpHandler,h=s()("navItem",e.className,{standAlone:void 0!==e.item.standAlone}),b=s()("navLink",e.linkClassName,(0,l.C_)("nav",r),{selected:a}),v=void 0===e.item.data?{}:e.item.data;if(a)d=(0,u.jsxs)("span",{className:b,children:[(0,u.jsx)("span",{className:"a11y",children:"Currently Selected: "}),r]},i);else if("asset"===n)d=(0,u.jsx)("a",{className:b,href:t,target:"_blank",rel:"noopener noreferrer",onKeyUp:m,children:r},i);else{var y=e.toggleMenuVisibility,g=e.item.clickHandler||e.clickHandler,j={className:b,key:i,url:e.isExternalHeader?(0,l.ch)(e.item.link):e.item.link,external:o,onClick:function(e){y(),g(e)},onKeyUp:m};p&&(j.onBlur=p),d=(0,u.jsx)(c.default,f(f(f({},j),v),{},{children:r}))}return(0,u.jsx)("li",{className:h,children:d},"li-".concat(r,"-").concat(e.index))}p.propTypes={item:o().object.isRequired,index:o().node,className:o().string,linkClassName:o().string,path:o().string,clickHandler:o().func,isExternalHeader:o().bool,toggleMenuVisibility:o().func,onBlur:o().func},p.defaultProps={item:null,index:"",className:"",linkClassName:"",path:"",clickHandler:function(){},isExternalHeader:!1,toggleMenuVisibility:function(){},onBlur:void 0},t.Z=p},69422:function(e,t,n){n.r(t),n.d(t,{default:function(){return r.Z}});var r=n(22417)},40238:function(e,t,n){n.d(t,{Z:function(){return w}});n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942),i=n(92972),o=n.n(i),a=n(14507),s=n.n(a),c=n(65393),l=n(2902),u=n(26574),d=n(53270),f=n(49291),p=n(88101),m=[300,460,620,780,1180],h="original",b=n(56552);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.hostName.trim()?"with ".concat(e.hostName.trim()):"",n=null;if(e.navigation.length&&e.hasMenu){var r={collapseOnMobile:!1,items:e.navigation,path:e.path,className:"introNav",id:"page-intro-nav"};n=(0,b.jsx)(c.ZP,y({},r))}var i="";e.showName&&(i=(0,p.C_)("show",e.showName));var o="introNav-".concat(e.baseSection,"-").concat(e.subSection),a=s()("pageIntro",i,o,{hasListenLive:e.listenRecord&&e.listenRecord.length&&e.baseSection}),l=e.noHeading?null:(0,b.jsx)(f.CD,{hidden:!0,text:"".concat(e.showName," ").concat(t)});return(0,b.jsxs)("div",{className:a,children:[j(e.listenRecord),l,x(e),n||O(e)]})}function j(e){if(e&&e.length)return(0,b.jsx)(d.Z,{listenRecord:e})}function x(e){if(!1===e.showImage)return null;var t={url:e.imageUrl,sizes:m,sizesRatio:h,loading:null,type:"host-image",useoriginalimage:!1,isAboveFold:!0},n=null;return e.imageUrl&&(n=(0,b.jsx)(l.Z,y({},t))),e.imageLink?(0,b.jsx)(u.default,{url:e.imageLink,children:n}):n}function O(e){if(e.description)return(0,b.jsx)("div",{className:"description",children:e.description})}g.propTypes={showName:o().string.isRequired,hostName:o().string.isRequired,imageUrl:o().string.isRequired,navigation:o().array,path:o().string,baseSection:o().string,subSection:o().string,listenRecord:o().array,hasMenu:o().bool,showImage:o().bool,noHeading:o().bool},g.defaultProps={showName:"",hostName:"",imageUrl:"",navigation:[],path:"",baseSection:"",subSection:"",listenRecord:null,hasMenu:!0,showImage:!0,noHeading:!0};var w=g},38262:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(29439),i=n(32747),o=n(7636),a=n(92972),s=n.n(a),c=n(65999),l=n(75854),u=n(97180),d=n(46826),f=(n(83464),n(19496),n(4942)),p=(n(58109),n(95566),n(68438),n(9867),n(7231),n(82196)),m=n(96818),h=n(20989),b=n(24979),v=n(50667),y=n(56552),g=function(e){var t=e.item,n=e.clickHandler,r=e.selected,i=t.airDate,o=t.captions,a=t.contentArea,s=t.duration,c=t.showName,l=t.sport,u=t.thumbnail,d=t.title,f=(0,y.jsx)(h.Z,{videoDuration:-1===s?0:s,videoAirDate:i,captions:!(!o||!o.src),type:u?"vertical":void 0});return(0,y.jsx)("li",{className:"playlist-item ".concat(u?"has-thumbnail":""," ").concat(r?"active":""),children:(0,y.jsxs)("div",{role:"button",className:"playlist-item-btn","aria-current":r,onClick:n,onKeyDown:function(e){e&&"Enter"===e.key&&n()},title:d,tabIndex:0,children:[u&&(0,y.jsxs)("div",{className:"playlist-thumbnail-container",children:[(0,y.jsx)(v.Z,{url:u,type:"video-card-horizontal"}),(0,y.jsx)("div",{className:"play-button-container",children:(0,b.VC)("Play")}),f]}),(0,y.jsxs)("div",{className:"playlist-item-info",children:[(0,y.jsx)("h3",{children:d}),!u&&f,(0,y.jsx)("span",{className:"content-area",children:c||l||a}),s>0&&(0,y.jsx)(m.I,{classes:"video-time-stamp",airDate:i,includeSeconds:!0})]})]})})};g.propTypes={item:s().shape({airDate:s().number,captions:s().any,contentArea:s().string,duration:s().number,showName:s().string,sport:s().string,thumbnail:s().string,title:s().string}),clickHandler:s().func,selected:s().bool,fireABGoal:s().func},g.defaultProps={item:{airDate:null,captions:{}||!1,contentArea:"",duration:0,showName:"",sport:"",thumbnail:"",title:""},clickHandler:function(){},selected:!1};var j=g;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=(0,o.useSelector)((function(e){var t;return null===e||void 0===e||null===(t=e.video)||void 0===t||null===(t=t.category)||void 0===t?void 0:t.title}))||e.categoryTitle,n=(0,o.useSelector)((function(t){return(0,p.S)(t,e.storePath||"")})),r=null!==n&&void 0!==n&&n.items?n.items.filter((function(e){return e})):[];(0,i.useEffect)((function(){r&&0!==r.length&&e.itemSelectionCallback(r[0],O(O({},e.featureAttribution),{},{position:1}),!1)}),[null===n||void 0===n?void 0:n.items]);var a,s=e.limit?e.limit:10;r&&(a=r.slice(0,s));var c=function(t){return!0===e.showThumbnails?t:O(O({},t),{},{thumbnail:null})};return(0,y.jsxs)("div",{className:"playlist",children:[(0,y.jsxs)("h3",{children:[t," - ",(0,y.jsxs)("span",{children:[a?a.length:0," videos"]})]}),(0,y.jsx)("div",{className:"playlist-inner",children:(0,y.jsx)("ul",{children:a&&a.map((function(t,n){if(t&&t.id)return(0,y.jsx)(j,{item:c(t),clickHandler:function(){e.itemSelectionCallback(t,O(O({},e.featureAttribution),{},{position:n+1}),!0),e.onClick&&e.onClick()},selected:(null===e.selectedId?r[0].id:e.selectedId)===t.id},t.id)}))})})]})},k=w;w.propTypes={categoryTitle:s().string,storePath:s().string.isRequired,itemSelectionCallback:s().func,selectedId:s().oneOfType([s().string,s().number]),featureAttribution:s().shape({name:a.string,instance:a.string}),showThumbnails:s().bool,onClick:s().func,limit:s().number},w.defaultProps={categoryTitle:"",itemSelectionCallback:function(){},selectedId:null,featureAttribution:{name:"",instance:""},showThumbnails:!1,limit:null};var N=n(53374);function P(e){var t=(0,o.useDispatch)(),n=(0,i.useState)({currentItem:{},featureAttribution:e.featureAttribution,autoPlay:!1}),a=(0,r.Z)(n,2),s=a[0],f=a[1];if(!e.storePath)return null;return(0,y.jsxs)("div",{className:"video-playlist ".concat(e.showThumbnails?"show-thumbnails":""),children:[(0,y.jsx)(c.Z,{config:{routeUpdate:!1,autoPlay:s.autoPlay},mediaItem:s.currentItem,featureAttribution:s.featureAttribution,render:u.Z}),(0,y.jsx)(N.Z.Provider,{value:!1,children:(0,y.jsx)(k,{storePath:e.storePath,itemSelectionCallback:function(e,n,r){var i,o,a;if(void 0!==e){var s=e.source===l.ld?{sourceId:e.id,mediaId:e.id,source:e.source,title:e.title,image:{url:e.thumbnail},showData:{name:e.showName},type:e.isVideo?"video":"audio",publishedAt:null!==(i=null===(o=e.airDate)||void 0===o?void 0:o.toString())&&void 0!==i?i:"0",media:{duration:e.duration,hasCaptions:!(null===(a=e.captions)||void 0===a||!a.src),streamType:e.isLive?"Live":"On-Demand"},isPlayable:!1,feature:n,enableRecommendations:!1}:e;r&&t((0,d.o)({mediaItem:s,featureAttribution:n})),f({currentItem:s,featureAttribution:n,autoPlay:r})}},selectedId:s.currentItem.sourceId,categoryTitle:e.categoryTitle,featureAttribution:e.featureAttribution,showThumbnails:e.showThumbnails,onClick:e.onClick,limit:e.limit})})]})}P.propTypes={storePath:s().string,categoryTitle:s().string,featureAttribution:s().shape({name:a.string,instance:a.string}),showThumbnails:s().bool,onClick:s().func,limit:s().number},P.defaultProps={storePath:"",categoryTitle:"",featureAttribution:{name:"",instance:""},showThumbnails:!1,limit:null}},23964:function(e,t,n){var r=n(32747),i=n(7636);t.Z=function(e,t){var n=(0,i.useSelector)((function(e){return e.app.path})),o=decodeURIComponent(n.toLocaleLowerCase()),a=decodeURIComponent(e.url.toLocaleLowerCase());(0,r.useEffect)((function(){"/".concat(o)!==a&&t&&t()}),[e.url])}},75564:function(e,t,n){n.d(t,{d:function(){return a}});var r=n(29439),i=n(32747),o=n(79532),a=function(e,t){var n,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null===(n=s.collapseOnMobile)||void 0===n||n,l=null!==(a=s.usingRightSideNav)&&void 0!==a&&a,u=(0,i.useState)(0),d=(0,r.Z)(u,2),f=d[0],p=d[1],m=(0,i.useRef)({domNode:null,callback:h,isInDOM:!1,windowWidth:0,timeoutID:null,wallpaperWidth:0});(0,i.useEffect)((function(){return m.current.isInDOM=!0,m.current.domNode&&o.ZP.registerResizeObject(m.current),function(){m.current&&(m.current.isInDOM=!1,o.ZP.unregisterResizeObject(m.current),window.cancelAnimationFrame(m.current.timeoutID))}}),[]),(0,i.useEffect)((function(){h(0,{usingRightSideNav:l})}),[t,e]),(0,i.useEffect)((function(){m.current.callback=function(){return h(0,{usingRightSideNav:l})}}),[f]);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).usingRightSideNav,n=void 0!==t&&t;e=m.current.wallpaperWidth>0?m.current.wallpaperWidth:document.documentElement.clientWidth,m.current.timeoutID=window.requestAnimationFrame((function(){var t=m.current.domNode;if(t&&m.current.isInDOM&&t.offsetWidth){var r=0;n&&(r=t.children[t.children.length-1].offsetWidth);var i=o.ZP.calculateHiddenItems(t,c,e,r);f!==i&&p(i),m.current.windowWidth=e}}))}return{assignRef:function(e){m.current.domNode=e},getHiddenItemsCount:function(){return f}}}},34637:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(92972),i=n.n(r),o=n(14507),a=n.n(o),s=n(47452),c=n(90955),l=n(56552);function u(e){var t=e.statusCode,n=!(t!==s.Iz&&t!==s.Ey||!e.polopolyId)&&"https://www.cbc.ca/lite/story/".concat(e.polopolyId);return(0,l.jsxs)("div",{className:a()("errorPage",c.Oo),"data-cy":"error-page",children:[(0,l.jsx)("div",{className:"statusCode",children:(0,l.jsx)("span",{className:"digit",children:t})}),(0,l.jsxs)("div",{className:"errorMessageText",children:[t===s.k6?"We're sorry but the page you requested could not be found.":t>=s.Iz&&t<=s.LK?"We're sorry but we've encountered an unexpected error.":"Sorry, but we've encountered an error.",(0,l.jsx)("br",{}),"Please try again from the ",(0,l.jsx)("a",{href:"/",children:"home page"}),n&&(0,l.jsxs)("span",{children:[", ",(0,l.jsx)("a",{href:n,children:"our Lite version (low bandwidth)"}),","]})," ","or"," ",(0,l.jsx)("a",{href:"https://cbchelp.cbc.ca/hc/en-ca/requests/new?ticket_form_id=114094002513",children:"contact us"}),"."]})]})}u.propTypes={statusCode:i().number,polopolyId:i().string},u.defaultProps={statusCode:s.k6}},78087:function(e,t,n){n.r(t),n.d(t,{AUTHED_COOKIE:function(){return i},COOKIE_DOMAIN:function(){return c},GUEST_COOKIE:function(){return r},LOCAL_COOKIE:function(){return a},LR_COOKIE:function(){return o},RADIO_REGEX:function(){return s}});var r="cbc_visitor",i="cbc_plus",o="lr-user--token",a="cbclocal",s="radio%3D([a-zA-Z-_]+)",c=".cbc.ca"},86045:function(e,t,n){n.r(t),n.d(t,{scrollTo:function(){return c},shiftFocusSafely:function(){return s}});var r=n(71002),i=n(68555),o=n(74987),a=function(){return"object"===("undefined"===typeof document?"undefined":(0,r.Z)(document))};function s(e){if((0,o.C)()&&a()){var t=document.querySelector(e);t&&t.focus()}}function c(e,t,n){if(a()&&n){t&&t.preventDefault(),i.OK.scrollTo(e,{duration:500,delay:50,smooth:!0,offset:-75});var r=document.querySelector(n);r&&r.focus()}}},74987:function(e,t,n){n.d(t,{C:function(){return r},s:function(){return i}});var r=function(){return"undefined"!==typeof window},i=function(){return"undefined"===typeof window}},41718:function(e,t,n){n.r(t);var r=n(39026),i=n(74987);var o="info";var a=(0,i.s)()?function(){var e=n(Object(function(){var e=new Error("Cannot find module 'winston'");throw e.code="MODULE_NOT_FOUND",e}())),t=e.createLogger,r=e.format,i=e.transports,a=t({level:o,format:r.combine(r.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),r.errors({stack:!0}),r.splat(),r.json())});return a.add(new i.Console({format:r.simple()})),a}():{debug:function(){},info:function(){var e;(e=console).info.apply(e,arguments)},warn:function(){var e;(e=console).warn.apply(e,arguments)},error:function(){r.p.apply(void 0,arguments),console.error(arguments.length<=0?void 0:arguments[0])}};t.default=a},91167:function(e,t,n){n.d(t,{$q:function(){return l},eN:function(){return d},fm:function(){return u}});n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942),i=n(40238),o=n(97767),a=n(88101),s=n(56552);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e,t){return t?{baseSection:t.baseSection,subSection:t.subSection,hasMenu:t.hasMenu,hostName:t.host||"",imageUrl:t.image,imageLink:t.imageLink||"",navigation:t.navigation instanceof Array?t.navigation:[],path:e,showName:t.title||"",description:t.description||"",noHeading:!1}:{section:"",subSection:"",hasMenu:!0,hostName:"",imageUrl:"",imageLink:"",navigation:[],path:e,showName:t?t.title:"",noHeading:!1}};var u=function(e){var t=e.path,n=e.baseSection,u=e.subSection,f=e.pageType,p=e.imageUrl,m=e.noHeading,h=e.rightrail,b=e.title,v=null;if(v="detail"===f?function(e,t,n){var r=!1,i=null,s=!0;for(var c in o.HK)if(Object.prototype.hasOwnProperty.call(o.HK,c)&&new RegExp("".concat(c,".*-[0-9].[0-9]*"),"g").test(e)&&o.HK[c].showOnStories){r=!0,i=c,s=Boolean(o.HK[c].showMenuOnStories);break}return r?(0,a.ZU)(o.HK,i,t,n,s):null}(t,n,u):function(e,t,n){var r=!1,i=null;for(var s in o.HK)if(Object.prototype.hasOwnProperty.call(o.HK,s)){var c=new RegExp("^".concat(s));if(e===s||o.HK[s].showOnAllSubsections&&c.test(e)){r=!0,i=s;break}}return r?(0,a.ZU)(o.HK,i,t,n,!0):null}(t,n,u),v){var y=l(t,v);return p&&(y.imageUrl=p),(y=d(y,h)).noHeading=m||!1,y.showName||(y.showName=b),(0,s.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y))}return null},d=function(e,t){return e&&!e.imageUrl&&null!==t&&void 0!==t&&t.banner&&(e.imageUrl=t.banner),e}},39026:function(e,t,n){n.d(t,{n:function(){return d},p:function(){return u}});n(9867),n(7231),n(53145),n(95566),n(62153);var r=n(90695),i=n(51069),o=n(11395),a=n(24733),s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return e.regex?new RegExp(e.regex):e}))},c=function(e){return function(t){var n,r;if("ocelot-react-gpt"===(null===(n=t.tags)||void 0===n?void 0:n.component))return null;var i=null===(r=t.exception)||void 0===r||null===(r=r.values)||void 0===r?void 0:r[0];if(i){var o;if(((null===(o=i.stacktrace)||void 0===o?void 0:o.frames)||[]).some((function(t){return function(e,t){return Object.values(e).some((function(e){return t.test(e)}))}(t,e)})))return null;if(e.test(i.value))return null}return t}},l=function(e){if(!e)return"No additional context.";if("string"===typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}},u=function(){var e=(arguments.length<=1?void 0:arguments[1])||(arguments.length<=0?void 0:arguments[0]);e&&e instanceof Error&&r.Tb(e,{extra:{context:l(e.extraData)}})},d=function(e,t){var n=e.sentry;if(n){var r,l=window.location.host,u=window.__APP_VERSION__,d=Number.isNaN(Number(n.tracesSampleRate))?.1:Number(n.tracesSampleRate),f=s(n.allowUrls),p=s(n.denyUrls),m=s(n.ignoreErrors),h=(r=n.beforeSendFilter,new RegExp(r||"pubads_impl|viafoura")),b=null;"www.cbc.ca"===l?b="production":"ocelot-staging.cbc.ca"===l?b="staging":l.startsWith("ocelot-")&&!l.startsWith("ocelot-de-")&&(b="qa"),null!==b&&i.S({dsn:"https://fef33bc017414f09bcf117882ad6b34a@o148878.ingest.sentry.io/5733890",release:"ocelot@"+u,integrations:[new o.gE({routingInstrumentation:a.qp(t),shouldCreateSpanForRequest:function(e){return!e.match(/(\/cookie-jar\/|\/comscore.json)/)}})],environment:b,allowUrls:f,denyUrls:p,ignoreErrors:m,tracesSampleRate:d,beforeSend:c(h)})}else console.error("Unable to initialize Sentry: FeatureFlag not found!")}},24515:function(e,t,n){n.d(t,{ax:function(){return c},D6:function(){return d},Bp:function(){return l}});n(30666),n(95566),n(6129),n(9867),n(7231);var r=n(43386),i=n(41718),o=n(50465),a="https://cbchelp.zendesk.com/api/v2/requests.json",s=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}};function c(e){return(0,r.request)(a,s(e)).then((function(e){if(!e.ok)throw new o.p(e.status,"".concat(e.status,": ").concat(e.statusText));return e})).catch((function(e){throw i.default.error("Zendesk - createTicket",e),e}))}var l=function(e,t,n){var r=e.typo_dropdown,i=t.fields.typo_dropdown.options.find((function(e){return e.value===r})).name,o="https://www.cbc.ca/".concat(n.path),a="http://polopoly.nm.cbc.ca:8080/polopoly/opencontent?contentInEdit=".concat(n.polopolyId),s=n.title.split("|").slice(0,-1).join("|").trim(),c='story "'.concat(s,'" has an ').concat(i),l="<p>Hi!</p><p>A new typo ticket has been submitted.</p>";l+="<p>The story \"<a href='".concat(o,"'>\"").concat(s,'</a>" has an ').concat(r,".</p>"),l+="<p>It can be <a href='".concat(a,"'>found on polopoly under content id ").concat(n.polopolyId,"</a></p>");var u=Object.keys(e).map((function(n){return{id:t.fields[n].zendesk_id.toString(),value:e[n]}}));u.push({id:t.staticFields.url.zendesk_id,value:"www.cbc.ca/".concat(n.path)}),u.push({id:t.staticFields.polopolyId.zendesk_id,value:n.polopolyId});var d=[];return t.formTags&&(d=d.concat(t.formTags)),n.department&&d.push("department_"+n.department),{request:{requester:{name:"Anonymous Web User"},subject:c,comment:{html_body:l},tags:d,custom_fields:u,ticket_form_id:t.zendesk_id}}},u=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"===typeof e&&Boolean(e.match(u))}},8375:function(e,t){t.Z={header:"header-VNwmS"}}}]);
//# sourceMappingURL=../../sourcemaps/oc-commons.7257d7c6c17391e0ff95.js.map